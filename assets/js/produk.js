var data = [
    {
        "nama": "Template Undangan Pernikahan",
        "photo": "produk/Template-Video-Undangan-Pernikahan.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "Tik Tok Marketing",
        "photo": "produk/Tik-Tok-Marketing.png",
        "harga": "50.000",
        "kategori": "Course"
    },
    {
        "nama": "Master Google Adwords",
        "photo": "produk/Master-Google-Adwords.jpeg",
        "harga": "50.000",
        "kategori": "Course"
    },
    {
        "nama": "Master Facebook Ads",
        "photo": "produk/Master-FB-Ads.png",
        "harga": "50.000",
        "kategori": "Course"
    },
    {
        "nama": "Presentation Maniac",
        "photo": "produk/Presentation-Maniac.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "Jago Ngiklan Google Ads",
        "photo": "produk/Jago-Ngiklan-Google-Ads.png",
        "harga": "50.000",
        "kategori": "Course"
    },
    {
        "nama": "Jago WA Marketing",
        "photo": "produk/Jago-WhatsApp-Marketing.png",
        "harga": "50.000",
        "kategori": "Course"
    },
    {
        "nama": "Canva Course PLR",
        "photo": "produk/Software-Video-Ads.png",
        "harga": "50.000",
        "kategori": "Course"
    },
    {
        "nama": "Template Ramadhan",
        "photo": "produk/Template-Ramadhan.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "Easy 3D Cover Template",
        "photo": "produk/Easy-3D-Cover-Template.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "Database Supplier Terlengkap",
        "photo": "produk/Database-Supplier-Terlengkap.png",
        "harga": "20.000",
        "kategori": "Database"
    },
    {
        "nama": "Elite Presentation Kit",
        "photo": "produk/Elite-Presentation-Kit.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "Template Elementor",
        "photo": "produk/Elementor-Template.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "1.000 Template Kaos Distro",
        "photo": "produk/Template-1000-Kaos-Distro.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "50.000 Stock Image HD",
        "photo": "produk/50-Ribu-Stock-Image-HD.png",
        "harga": "15.000",
        "kategori": "Assets"
    },
    {
        "nama": "Template SEO Blogger",
        "photo": "produk/Template-SEO-Blogger.png",
        "harga": "30.000",
        "kategori": "Script"
    },
    {
        "nama": "Giant Marketing Volume 3",
        "photo": "produk/Giant-Marketing-Kit-Vol-3.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "Giant Marketing Volume 2",
        "photo": "produk/Giant-Marketing-Kit-Vol-2.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "Template Instagram Banner",
        "photo": "produk/Instagram-Banner-Template.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "Mascot Creator Bundle",
        "photo": "produk/Mascot-Creator-Bundle.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "WP Plugin Premium",
        "photo": "produk/80-WP-Plugin-Premium.png",
        "harga": "30.000",
        "kategori": "Script"
    },
    {
        "nama": "Theme Design Template",
        "photo": "produk/Theme-Desaign-Template.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "Instastory Template",
        "photo": "produk/Insta-Story-Template.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "Graphic Bos",
        "photo": "produk/Graphic-Bos.png",
        "harga": "20.000",
        "kategori": "Assets"
    },
    {
        "nama": "123 Kit Logo",
        "photo": "produk/123-Logo-Kit.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "Database Supplier Tokopedia",
        "photo": "produk/Database-Supplier-Tokopedia.png",
        "harga": "20.000",
        "kategori": "Database"
    },
    {
        "nama": "WordPress Video Tutorial",
        "photo": "produk/Youtube-Playlist-Creator.png",
        "harga": "50.000",
        "kategori": "Course"
    },
    {
        "nama": "Digital Graphics",
        "photo": "produk/Digital-Graphics.png",
        "harga": "20.000",
        "kategori": "Assets."
    },
    {
        "nama": "Course Sukses Bisnis Online",
        "photo": "produk/Course-Bisnis-Online.png",
        "harga": "50.000",
        "kategori": "Course"
    },
    {
        "nama": "Video Template",
        "photo": "produk/PLR-Vidio-Template.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "Vector Cartoon Pack",
        "photo": "produk/Vector-Cartoon.jpg",
        "harga": "20.000",
        "kategori": "Assets."
    },
    {
        "nama": "Graphic Pro",
        "photo": "produk/Graphic-Pro.png",
        "harga": "20.000",
        "kategori": "Assets."
    },
    {
        "nama": "60 Actions Photoshop",
        "photo": "produk/60-Action-Photoshop.png",
        "harga": "30.000",
        "kategori": "Script"
    },
    {
        "nama": "Mega PLR Music 1",
        "photo": "produk/Mega-PLR-Music-Tracks.png",
        "harga": "22.000",
        "kategori": "Music"
    },
    {
        "nama": "Preset Lightroom Bonus",
        "photo": "produk/1500-Presets-Lightroom.png",
        "harga": "30.000",
        "kategori": "Script"
    },
    {
        "nama": "500+ PPT Template",
        "photo": "produk/500-Template-IG-Feed.png",
        "harga": "25.000",
        "kategori": "Template"
    },
    {
        "nama": "40 WordPress Theme",
        "photo": "produk/40-Wordpress-Theme.png",
        "harga": "30.000",
        "kategori": "Script"
    },
    {
        "nama": "Mega PLR Music 2",
        "photo": "produk/Mega-PLR-Music-2.png",
        "harga": "22.000",
        "kategori": "Music"
    }
];

var products = "",
	  kategories = "";
	  
for (var i = 0; i < data.length; i++) {
	var kategori = data[i].kategori,
		nama = data[i].nama,
		harga = data[i].harga,
		photo = data[i].photo;
	
	products += "<div class='product' data-kategori='" + kategori + "' data-nama='" + nama + "'><a class='button-produk' data-bs-toggle='offcanvas' data-bs-target='#offcanvasBottom' aria-controls='offcanvasBottom' data-obj='"+i+"'><div class='product-inner text-left' ><img src='" + photo + "' alt='"+ nama +"' width='100%' style='auto;aspect-ratio:1/1;border-top-left-radius:10px;border-top-right-radius:10px;padding:20px'><br/><h3 class='nama-produk'>" + nama + "</h3><p style='color:red;display:flex;float:left;padding-left:8px;padding-top:5px;font-size:10pt'></p><div class='harga-produk'>" + kategori + "</div></a></div></div>";
	
	if (kategories.indexOf("<option value='" + kategori + "'>" + kategori + "</option>") == -1) {
		kategories += "<option value='" + kategori + "'>" + kategori + "</option>";
	}
}

$("#products").html(products);
$(".filter-kategori").append(kategories);

var filtersObject = {};

$(".filter").on("change",function() {
	var filterName = $(this).data("filter"),
		filterVal = $(this).val();
	
	if (filterVal == "") {
		delete filtersObject[filterName];
	} else {
		filtersObject[filterName] = filterVal;
	}
	
	var filters = "";
	
	for (var key in filtersObject) {
	  	if (filtersObject.hasOwnProperty(key)) {
			filters += "[data-"+key+"='"+filtersObject[key]+"']";
	 	}
	}
	
	if (filters == "") {
		$(".product").show();
	} else {
		$(".product").hide();
		$(".product").hide().filter(filters).show();
	}
});

var dataLength = data.length;
var thisElement = 0;

function innerContent(content){
  var whatsapp ="628973771555";
  whatsapp = "<a href='whatsapp://send?phone="+ whatsapp+"&text=👋🏻Hallo kak? Saya ingin memesan:%0A%0A*Nama Produk* : "+ data[content].nama + "%0A*Harga* Rp: "+ data[content].harga + "%0A%0ATerima Kasih' data-obj='"+ i +"'><button type='button' class='btn'><i class='fab fa-whatsapp'></i>&nbsp;&nbsp;Via WhatsApp</button></a>";
  $("#whatsapp").html(whatsapp);
  
  $(".inner-title-produk").html(data[content].nama);
  $(".inner-price-produk").html(data[content].harga);
  $(".inner-photo-produk").attr("src",data[content].photo);
};

$(".button-produk").click(function(e){
  e.preventDefault();
  thisElement = $(this).attr("data-obj");
  innerContent(thisElement);
  dissBtn();
});

$("#search-form").submit(function(e) {
	e.preventDefault();
	var query = $("#search-form input").val().toLowerCase();

	$(".product").hide();
	window.scrollTo(0, 650);
	$(".product").each(function() {
		var kategori = $(this).data("nama").toLowerCase();

		if (kategori.indexOf(query) > -1) {
			$(this).show();
		}
	});
});

$(document).ready(function(){
  var list = $("#products .product");
  var numToShow = 20;
  var button = $("#produk-lainnya");
  var numInList = list.length;
  list.hide();
  if (numInList > numToShow) {
    button.show();
  }
  list.slice(0, numToShow).show();

  button.click(function(){
      var showing = list.filter(':visible').length;
      list.slice(showing - 1, showing + numToShow).fadeIn();
      var nowShowing = list.filter(':visible').length;
      if (nowShowing >= numInList) {
        button.hide();
      }
  });

});
